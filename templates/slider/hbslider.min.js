(function(e){e.hbslider=function(t,n){var r=n==undefined?{}:n,i=e.extend({},e.hbslider.defaults),s=e.hbslider.effects[r.effect==undefined?i.effect:r.effect],o=e.hbslider.styles[r.style==undefined?i.style:r.style],u=e(t);o=o?o:e.hbslider.styles.basic,s=s?s:e.hbslider.effects.slide,s.settings!==undefined&&e.extend(i,s.settings),o.settings!==undefined&&e.extend(i,o.settings),e.extend(i,r),u.ready=!1,hbs={build:function(){u.ready||(u.wrap('<div class="hbs-container">'),u.container=u.parent(".hbs-container"),u.addClass("hbs-slider"),i.slidesselector!=""?u.slides=u.children(i.slidesselector):u.slides=u.children(),u.slides.css({position:"absolute",display:"block",opacity:0,top:0,left:0}));if(!u.ready&&u.slides.find("img").length){u.slides.find("img").eq(0).one("load",function(){u.ready=!0,hbs.build()}).each(function(){this.complete&&e(this).load()});return}u.ready=!0,u.current=0,u.next=1,hbs.setcss(),u.playing=!1,u.paused=!1,u.animationinterval=!1,u.animating=!1,i.scaleimages&&hbs.scaleimages(),u.slides.css({width:"100%",height:"100%"}),o.build(u,i),hbs.buildcaptions(),s.build(u,i),hbs.coreevents(),i.showpagination&&hbs.pagination.build(),i.showdirection&&hbs.prevnext.build(),i.startSlide(u);if(u.slides.size()<2){i.lastSlide(u);return}hbs.keyboardevents(),hbs.mouseevents(),i.autoplay&&(i.startdelay>0?setTimeout(u.play,i.startdelay):u.play())},setcss:function(){u.width=i.width?i.width:u.slides.outerWidth(),u.height=i.height?i.height:u.slides.outerHeight();if(u.slides.find("img").length<1&&!i.width){var t=u.container.parent().width();t>u.width&&(u.width=t);var n=u.width/2.35;n>u.height&&(u.height=parseInt(n))}u.container.css({width:u.width,height:u.height});var r="top,right,bottom,left".split(",");e.each(r,function(t,n){var r=e.trim(n);u.container.css(r,u.css(r)),u.css(r," ")}),u.css({width:"100%",height:"100%"}),u.container.css("position","relative"),u.slides.eq(0).css({opacity:1})},scaleimages:function(){u.slides.find("img:eq(0)").each(function(){e(this).css({width:u.width,height:u.height})})},captioneffects:function(t,n){var r=e("."+i.captionselector,u.slides.eq(u.current));if(r.length<1){typeof n=="function"&&n();return}if(t=="show")switch(i.captioneffect){case"slide":r.slideDown("slow");break;case"fade":r.fadeIn("slow")}else switch(i.captioneffect){case"slide":r.slideUp("fast",n);break;case"fade":r.fadeOut("fast",n)}},buildcaptions:function(){i.captioneffect!="none"&&i.showcaption&&u.bind("hb-effect-stop-internal",function(){hbs.captioneffects("show")});if(e("."+i.captionselector,u).length){e("."+i.captionselector,u).addClass(i.captionstyle).show(),u.slides.addClass("hbs-slide"),(!i.showcaption||i.captioneffect!="none")&&e("."+i.captionselector,u).hide().eq(0).show();return}var t=!1;u.slides.each(function(){var n="",r=e(this),s="";r.children().length&&r.find("img").length?n=r.find("img").attr("alt"):r.attr("alt")&&(t=!0,n=e(this).attr("alt"),r.wrap("<div>"),r=r.parent()),n&&(s=e('<div class="'+i.captionselector+'"></div>').html(n),r.append(s))}),e("."+i.captionselector,u).show(),i.captioneffect!="none"&&e("."+i.captionselector,u).hide().eq(0).show(),t&&(i.slidesselector!=""?u.slides=u.children(i.slidesselector):u.slides=u.children()),e("."+i.captionselector,u).addClass(i.captionstyle),u.slides.addClass("hbs-slide")},coreevents:function(){u.bind("hb-effect-start",function(){i.beforeSlide(u)}),u.bind("hb-effect-stop",function(e,t){u.animating=!1,u.current=u.next,u.next=u.current+1,u.next>=u.slides.length&&(i.lastSlide(u),u.next=0),u.current==0&&(u.next=1),u.trigger("hb-effect-stop-internal",[t]),u.play(),i.afterSlide(u)})},pagination:{build:function(){if(!i.showpagination)return!1;if(!e("."+i.paginationcontainer,u.container).length){var t=e("<ul>").addClass(i.paginationcontainer);u.container.append(t)}if(u.slides.size()<2){e("."+i.paginationcontainer,u.container).hide();return}e("."+i.paginationcontainer,u.container).children().length||(u.slides.each(function(t){var n=e(i.paginationelement);n.text(t+1),e("."+i.paginationcontainer,u.container).append(n)}),e("."+i.paginationcontainer,u.container).children().eq(u.current).addClass("active")),hbs.pagination.bind()},bind:function(){e("."+i.paginationcontainer,u.container).children().each(function(t){e(this).click(function(){if(u.current==t)return!1;e("."+i.paginationcontainer,u.container).children().removeClass("active"),e(this).addClass("active"),u.next=t;var n="next";return u.current>u.next&&(n="prev"),u.calleffects(n,!0),!1})}),u.bind("hb-effect-stop-internal",function(){e("."+i.paginationcontainer,u.container).children().removeClass("active").eq(u.current).addClass("active")})}},prevnext:{build:function(){if(!i.showdirection)return;if(!e("."+i.prevselector,u.container).length){var t=e("<div>").addClass(i.nextselector).html("&rsaquo;"),n=e("<div>").addClass(i.prevselector).html("&lsaquo;");u.container.append(t),u.container.append(n)}if(u.slides.size()<2){e("."+i.prevselector,u.container).hide(),e("."+i.nextselector,u.container).hide();return}i.loop||e("."+i.prevselector,u.container).addClass("disabled"),hbs.prevnext.bind()},bind:function(){var t=e("."+i.prevselector,u.container),n=e("."+i.nextselector,u.container);t.click(function(t){t.preventDefault(),e(this).hasClass("disabled")||(u.next=u.current-1,u.next<0&&(u.next=u.slides.length-1),u.calleffects("prev"))}).hover(function(){u.pause()},function(){u.play()}),n.click(function(t){t.preventDefault(),e(this).hasClass("disabled")||u.calleffects("next")}).hover(function(){u.pause()},function(){u.play()}),i.loop||u.bind("hb-effect-stop-internal",function(e,r){t.removeClass("disabled"),n.removeClass("disabled"),u.current==0?t.addClass("disabled"):u.current==u.slides.length-1&&n.addClass("disabled")})}},keyboardevents:function(){i.keyboard&&e(document).bind("keyup",function(e){e.keyCode===39?(e.preventDefault(),u.calleffects("next")):e.keyCode===37&&(e.preventDefault(),u.next=u.current-1,u.next<0&&(u.next=u.slides.length-1),u.calleffects("prev"))})},mouseevents:function(){i.pauseonhover&&i.mousescroll&&(i.pauseonhover=!1),i.pauseonhover&&u.hover(function(){u.pause()},function(){u.play()}),i.mousescroll&&u.bind("mousewheel",function(e,t){e.preventDefault(),u.calleffects(t<0?"next":"prev")})}},u.play=function(){u.playing=!0,u.paused=!1,clearInterval(u.animationinterval),u.animationinterval=setInterval(u.animate,i.slidedisplaytime)},u.pause=function(){u.paused=!0,clearInterval(u.animationinterval)},u.animate=function(){u.animating||u.calleffects("next")},u.calleffects=function(e,t){if(!u.animating){if(!i.loop&&t==undefined&&e=="next"&&u.slides.length==u.current)return;u.animating=!0,u.pause(),i.captioneffect!="none"&&i.showcaption?hbs.captioneffects("hide",function(){s.animate(e,u,i)}):s.animate(e,u,i)}},this.play=function(){u.play()},this.pause=function(){u.pause()},this.nextslide=function(){u.calleffects("next")},this.prevslide=function(){u.calleffects("prev")},this.set=function(t){if(u.current==t||u.slides.length-1<t)return!1;e("."+i.paginationcontainer,u.container).children().removeClass("active"),e(this).addClass("active"),u.next=t;var n="next";return u.current>u.next&&(n="prev"),u.calleffects(n,!0),!1},hbs.build()},e.hbslider.defaults={autoplay:!0,loop:!0,debug:!1,width:!1,height:!1,scaleimages:!1,responsive:!0,showdirection:!0,showpagination:!0,showcaption:!0,slidedisplaytime:3e3,startdelay:100,pauseonhover:!0,mousescroll:!1,keyboard:!1,slidesselector:"",captionselector:"hbs-caption",captionstyle:"bottom",paginationcontainer:"hbs-slider-paginate",paginationelement:"<li>",prevselector:"hbs-slider-prev",nextselector:"hbs-slider-next",effect:"slide",defaulteasing:"linear",effecttime:300,captioneffect:"none",style:"basic",startSlide:function(){},beforeSlide:function(){},afterSlide:function(){},lastSlide:function(){}},e.hbslider.effects={slide:{build:function(e,t){e.css({top:"auto",left:"auto",position:"relative",overflow:"hidden"}),e.slides.css({margin:0,width:"100%",height:"100%",position:"absolute",zIndex:0,opacity:0,overflow:"hidden"}),e.slides.eq(e.current).css({opacity:1})},animate:function(e,t,n){t.trigger("hb-effect-start");var r=0,i=0,s=0;switch(e){case"next":i=-t.width,s=t.width;break;case"prev":i=t.width,s=-t.width}t.slides.eq(t.next).css({zIndex:5,opacity:1,left:s}),t.slides.eq(t.current).animate({left:i},n.effecttime,n.defaulteasing),t.slides.eq(t.next).animate({left:r},n.effecttime,n.defaulteasing,function(){t.slides.eq(t.current).css({opacity:0,zIndex:0}),t.trigger("hb-effect-stop",[e])})},settings:{}}},e.hbslider.styles={basic:{build:function(t,n){if(n.showpagination){var r=e("<ul>").addClass(n.paginationcontainer);t.container.append(r)}if(n.showdirection){var i=e("<div>").addClass(n.nextselector).html("&rsaquo;"),s=e("<div>").addClass(n.prevselector).html("&lsaquo;");t.container.append(i),t.container.append(s)}t.container.addClass("hbs-style-basic")},settings:{}}},e.fn.shuffle=function(){return this.each(function(){var t=e(this).children();return t.length?e(this).html(e.shuffle(t)):this})},e.shuffle=function(e){for(var t,n,r=e.length;r;t=parseInt(Math.random()*r,10),n=e[--r],e[r]=e[t],e[t]=n);return e},e.fn.outerHTML=function(e){return e?this.before(e).remove():jQuery("<p>").append(this.eq(0).clone()).html()},e.fn.hbslider=function(t){return this.each(function(){var n=e(this);if(n.data("hbslider"))return n.data("hbslider");var r=new e.hbslider(n,t);n.data("hbslider",r)})}})(jQuery);
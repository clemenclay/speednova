
/* Fix for IE window.location issues */
window.MSStream && window.addEventListener("DOMContentLoaded", function (){
    var base = document.getElementsByTagName('base')[0].href,
        links = document.getElementsByTagName('a');
    for(var l = links.length, i =0; l > i; i++){
        var a = links[i], href = a.getAttribute("href");
        if(href && href.indexOf('http') !== 0 && href.indexOf('/') !== 0){
            a.setAttribute("href", base + href);
        }
    }
});

var cansearch=true;var loaders=new Array;function appendLoader(a){loaders[loaders.length]=a}$.extend($.fn,{slideToElement:function(b){var a=$("a[name="+b+"]");if(a.length){var c=a.offset().top;$("html,body").animate({scrollTop:c-100},500,"linear",function(){});return false}},addLoader:function(){var b=$(this).width();var c=$(this).height();b+=parseInt($(this).css("padding-left"),10)+parseInt($(this).css("padding-right"),10);c+=parseInt($(this).css("padding-top"),10)+parseInt($(this).css("padding-bottom"),10);if($("#preloader").length>0){$("#preloader").css({width:b+"px",height:c+"px"});$("#preloader").show()}else{var a='<div id="preloader" style="position:absolute;top:'+$(this).position().top+"px;left:"+$(this).position().left+"px;width:"+b+"px;height:"+c+'px;"></div> ';$(this).append(a)}},TabbedMenu:function(c){var b=c!=undefined&&c.elem!=undefined?c.elem:".tabb";var a=c!=undefined&&c.num!=undefined?c.num:0;$(b).hide();$(b).eq(a).show();$("a.tchoice").eq(a).addClass("picked");$(this).find("a.tchoice").each(function(d){$(this).click(function(){$(b).hide();$(b).eq(d).show();$("a.tchoice").removeClass("picked");$(this).addClass("picked");return false})});return($(this))},ajaxHint:function(){$(this).each(function(){$(this).keyup(function(){if(cansearch){if($(this).val()!=""&&$(this).val()!=" "){cansearch=false;$.post("?cmd=tickets&action=kbhint",{query:$(this).val()},function(a){cansearch=true;var b=parse_response(a);if(b!==false&&typeof(b)=="string"&&b!=""){$("#hintarea").html(b);if(!$("#hintarea").is(":visible")){$("#hintarea").slideDown()}}})}else{$("#hintarea").slideUp("fast",function(){$(this).html("")})}}})})}});function isEmpty(a){if(typeof a=="string"){if(a.length>0){return false}}for(var b in a){if(a.hasOwnProperty(b)){return false}}return true}function ajax_update(a,b,d,c){if(c){$(d).html('<center><img src="ajax-loading.gif" /></center>')}if(b!=undefined&&isEmpty(b)){b={empty1m:"param"}}$.post(a,b,function(e){var f=parse_response(e);if(!f){$(d).html("");return false}else{$(d).html(f)}})}function parse_response(data){if(data.indexOf("<!-- {")!=0){return false}var codes=eval("("+data.substr(data.indexOf("<!-- ")+4,data.indexOf("-->")-4)+")");var i=0;for(i=0;i<codes.ERROR.length;i++){$("#errors .alert").append("<span >"+codes.ERROR[i]+"</span>")}for(i=0;i<codes.INFO.length;i++){$("#infos .alert").append("<span >"+codes.INFO[i]+"</span>")}if($("#errors").find("span").length>0){$("#errors .alert").show();$("#errors").slideDown();reBind()}if($("#infos").find("span").length>0){$("#infos .alert").show();$("#infos").slideDown();reBind()}if(codes.ERROR.length||codes.INFO.length){$("html, body").animate({scrollTop:$("#infos, #errors").offset().top},500)}return data.substr(data.indexOf("-->")+3,data.length)}function reBind(){$(".close").unbind("click");$(".close").click(function(){$(this).parent().fadeOut("fast",function(){$(this).find("span").remove()});return false})}$(document).ready(function(){function CSRFProtection(xhr){var token=$('meta[name="csrf-token"]').attr("content");if(token){xhr.setRequestHeader("X-CSRF-Token",token)}}if("ajaxPrefilter" in $){$.ajaxPrefilter(function(options,originalOptions,xhr){CSRFProtection(xhr)})}else{$(document).ajaxSend(function(e,xhr){CSRFProtection(xhr)})}$(".vtip_description").tooltip();$(".sh1a .orderboxpadding").click(function(){var e=$(this).parent().find(".subdesc_").eq(0);if($(e).is(":visible")){$(e).hide()}else{$(e).show()}});$("a.sortorder").click(function(){$("#updater").addLoader();$("#checkall").attr("checked",false);$("#currentlist").attr("href",$(this).attr("href"));$("a.sortorder").removeClass("asc");$("a.sortorder").removeClass("desc");if($(this).attr("href").substring($(this).attr("href").lastIndexOf("|"))=="|ASC"){$(this).addClass("asc");$(this).attr("href",$(this).attr("href").substring(0,$(this).attr("href").lastIndexOf("|"))+"|DESC")}else{$(this).addClass("desc");$(this).attr("href",$(this).attr("href").substring(0,$(this).attr("href").lastIndexOf("|"))+"|ASC")}ajax_update($("#currentlist").attr("href"),{page:$("#currentpage").val(),layer:"ajax"},"#updater");return false});$("#pageswitch button").click(function(){var p=parseInt($(this).text())-1;$("#currentpage").val(p).change();return false});$("#currentpage").change(function(){$("#updater").addLoader();$("#checkall").attr("checked",false);ajax_update($("#currentlist").attr("href"),{page:$("#currentpage").val(),layer:"ajax"},"#updater")});$(".submiter").click(function(){$("#updater").addLoader();$("#checkall").attr("checked",false);var pushs="";if($(this).attr("queue")){pushs="push"}ajax_update($("#currentlist").attr("href")+"&"+$("#testform").serialize()+"&"+$(this).attr("name"),{layer:"ajax",stack:pushs},"#updater");return false});reBind();$("#ticketmessage").ajaxHint();setTimeout(function(){if($("#errors").find("span").length>0){$("#errors").slideDown()}if($("#infos").find("span").length>0){$("#infos").slideDown()}},30);if(loaders.length>0){var i=0;for(i=0;i<loaders.length;i++){if(loaders[i]=="flyingSidemenu"){continue}eval(loaders[i]+"()")}}(function($){var e=0;var w=100;var u=$(".pa1 a","#submenu");var l=u.length;u.each(function(o){if(e==0&&$(this).width()+$(this).position().left>960){e=o}if($(this).width()>w){w=$(this).width()}});if(e>0){var d=$('<ul class="dropdown-menu"></ul>');var a=$('<a class="dropdown-toggle" data-toggle="dropdown" href="#"></a>').text("More").append($('<b class="caret"></b>'));var more=$('<li class="dropdown"></li>').append(a);for(i=l;i>=e;i--){d.prepend(u.eq(i))}more.append(d);$(".pa1","#submenu").append(more)}})(jQuery);var $win=$(window),$nav=$("#mainmenu"),navTop=$("#mainmenu").length&&$("#mainmenu").offset().top,isFixed=0;processScroll();wrapIcons();$win.on("scroll",processScroll);if($("#cart").length&&$("#sidemenu").length&&$("#floater").length){$win.on("scroll",processScroll2)}function processScroll(){var i,scrollTop=$win.scrollTop();if(scrollTop>=navTop&&!isFixed){isFixed=1;$nav.addClass("nav-fixed")}else{if(scrollTop<=navTop&&isFixed){isFixed=0;$nav.removeClass("nav-fixed")}}}function processScroll2(){var t=$(window).scrollTop()-$("#sidemenu").offset().top;var maxi=$("#cart").height()-$("#floater").height()-15;if(t>maxi){t=maxi}if(t<0){t=0}if($("#mainmenu").hasClass("nav-fixed")){t+=60}$("#floater").animate({top:t+"px"},{queue:false,duration:300})}$("#mainmenu .dropdown-menu button.btn").click(function(){if($(this).attr("href")){window.location=$(this).attr("href")}});function clearMenus(o){$(o).parent().children(".dropdown-menu").stop(false,true).slideUp("fast").parent().removeClass("open")}$("#mainmenu .dropdown-toggle").live({mouseenter:function(){$(this).parent().addClass("open").children(".dropdown-menu").slideDown("fast")},mouseleave:function(){var o=this;var timeoutId=setTimeout(function(){clearMenus(o)},50);$(".dropdown-menu",this.parent).data("timeoutId",timeoutId)}}).unbind("click").click(function(e){e.stopPropagation();return true});$(".dropdown-menu","#mainmenu li.dropdown").live({mouseenter:function(){clearTimeout($(this).data("timeoutId"))},mouseleave:function(){clearMenus(this)}})});function wrapIcons(){var b=$.browser.version.substring(0,$.browser.version.indexOf("."));if($.browser.msie&&b=="7"){var a={phone:"!",mobile:'"',tag:"#",directions:"$",mail:"%",pencil:"&",paperclip:"'",reply:"(","replay-all":")",forward:"*",user:"+",users:",","add-user":"-",card:".",extract:"/",marker:"0",map:"1",compass:"2",arrow:"3",target:"4",path:"5",heart:"6",star:"7",like:"8",chat:"9",speech:":",quote:";",printer:"<",bell:"=",link:">",flag:"?",gear:"@",flashlight:"A",cup:"B","price-tag":"C",camera:"D",moon:"E",palette:"F",leaf:"G","music-note":"H",bag:"I",plane:"J",buoy:"K",rain:"L",eye:"M",clock:"N",mic:"O",calendar:"P",lightning:"Q",hourglass:"R",rss:"S",wifi:"T",lock:"U",unlock:"V",tick:"W",cross:"X","minus-round":"Y","plus-round":"Z","cross-round":"[",minus:"\\",plus:"]",forbidden:"^",info:"_","info-round":"`",question:"a","question-round":"b",warning:"c",redo:"d",undo:"e",swap:"f",revert:"g",refresh:"h",list:"i","list-add":"j",thumbs:"k","page-list":"l",page:"m",pages:"n",marker:"0",pictures:"p",movie:"q",music:"r",folder:"s",drawer:"t",trash:"u",outbox:"v",inbox:"w",download:"x",cloud:"y","cloud-upload":"z",play:"{",pause:"|",record:"~",forward:"Ä",backward:"Å",previous:"Ç",next:"É",expand:"Ñ",reduce:"Ö",volume:"Ü",loud:"á",mute:"à","left-fat":"â","down-fat":"ä","up-fat":"ã","right-fat":"å",left:"ç",down:"é",up:"è",right:"ê","left-round":"ë","down-round":"í","up-round":"ì","right-round":"î",home:"ï",ribbon:"ñ",read:"ó","new-tab":"ò",search:"ô",ellipsis:"ö","bullet-list":"®","creative-commons":"©"};$('[class^="iconfont-"],[class*=" iconfont-"]').each(function(e){var c=/iconfont-([^ ]+)/.exec(this.className)[1],d=$(this);if(a[c]){d.prepend('<span class="font-icon'+(d.is(":empty")?" empty":"")+'">'+a[c]+"</span>")}})}if($.browser.msie&&parseInt(b)==8){$('[class^="iconfont-"],[class*=" iconfont-"]').each(function(d){var c=$(this);if(c.is(":empty")){c.addClass("font-icon-empty")}})}};